{"version":3,"names":["govTooltipCss","GovTooltip","constructor","hostRef","this","tooltipContentId","undefined","tooltipId","TooltipVariant","PRIMARY","TooltipSize","_M","h","govHost","host","createID","validateVariant","newValue","validateProp","TooltipClass","root","validateSize","validatePosition","TooltipPosition","componentWillLoad","variant","size","position","createContentWrapper","registerListeners","disconnectedCallback","removeContent","hasContentInside","querySelector","TooltipContentClass","content","document","createElement","innerHTML","message","appendChild","setAttribute","_a","identifier","body","addEventListener","e","preventDefault","persist","showTooltip","hideTooltip","verifyPositionSpace","offset","windowWidth","window","innerWidth","documentElement","clientWidth","trigger","getBoundingClientRect","trgWidth","offsetWidth","trgHeight","offsetHeight","contentWidth","contentHeight","triggerPos","left","scrollLeft","top","scrollTop","isRightSpace","width","isLeftSpace","LEFT","RIGHT","style","TOP","BOTTOM","leftPosition","isNotLeftSpace","isNotRightSpace","right","opacity","hidden","requestAnimationFrame","removeAttribute","contentEl","getElementById","remove","render","Host","id","class","classes","role","tabindex","show","hide"],"sources":["../../../packages/core/src/components/gov-tooltip/gov-tooltip.scss?tag=gov-tooltip","../../../packages/core/src/components/gov-tooltip/gov-tooltip.tsx"],"sourcesContent":["/*\n *   Tooltip\n */\n\n$class: \".gov-tooltip\";\n\n#{$class} {\n\tdisplay: inline-block;\n\tborder-bottom: 1px dashed currentcolor;\n\tcolor: color(\"primary\");\n\tcursor: help;\n\n\t@include parameter(\"icon\") {\n\t\tborder-bottom: 0;\n\t}\n}\n","import {Component, Element, h, Host, Method, Prop, State, Watch} from \"@stencil/core\"\nimport {validateProp} from \"../../helpers/Validate/props\"\nimport {\n\tTooltipClass,\n\tTooltipContentClass,\n\tTooltipPosition,\n\tTooltipPositionType,\n\tTooltipSize,\n\tTooltipSizeType,\n\tTooltipVariant,\n\tTooltipVariantType,\n} from \"./constants\"\nimport {createID} from \"../../utils/string.utils\"\nimport {govHost} from \"../../helpers/Dom/template\"\nimport {GovHost} from \"../../helpers/Dom/template.types\"\n\n@Component({\n\ttag: \"gov-tooltip\",\n\tstyleUrl: \"gov-tooltip.scss\",\n})\nexport class GovTooltip {\n\tprivate h: GovHost\n\tprivate content: HTMLGovTooltipContentElement\n\tprivate readonly tooltipContentId = undefined\n\tprivate readonly tooltipId = undefined\n\n\tconstructor() {\n\t\tthis.h = govHost(this.host)\n\t\tthis.tooltipId = createID(\"GovTooltip\")\n\t\tthis.tooltipContentId = createID(\"GovContentTooltip\")\n\t}\n\n\t@Element() host: HTMLGovTooltipElement\n\t/**\n\t * Style variation of the tooltip\n\t */\n\t@Prop() readonly variant?: TooltipVariantType = TooltipVariant.PRIMARY\n\t/**\n\t * Tooltipâ€™s size.\n\t */\n\t@Prop() readonly size?: TooltipSizeType = TooltipSize._M\n\t/**\n\t * Tooltip display position\n\t */\n\t@Prop({mutable: true}) position: TooltipPositionType = \"right\"\n\t/**\n\t * Information contained in the tooltip\n\t */\n\t@Prop() readonly message: string = undefined\n\t/**\n\t * Custom tooltip identifier.\n\t */\n\t@Prop({attribute: \"identifier\"}) readonly identifier: string\n\t/**\n\t * Trigger is just an icon\n\t */\n\t@Prop({reflect: true}) readonly icon: boolean = undefined\n\n\t@State() persist = false\n\n\t@Watch(\"variant\")\n\tvalidateVariant(newValue: string): void {\n\t\tvalidateProp(TooltipVariant, newValue, TooltipClass.root)\n\t}\n\n\t@Watch(\"size\")\n\tvalidateSize(newValue: string): void {\n\t\tvalidateProp(TooltipSize, newValue, TooltipClass.root)\n\t}\n\n\t@Watch(\"position\")\n\tvalidatePosition(newValue: string): void {\n\t\tvalidateProp(TooltipPosition, newValue, TooltipClass.root)\n\t}\n\n\tcomponentWillLoad(): void {\n\t\tthis.validateVariant(this.variant)\n\t\tthis.validateSize(this.size)\n\t\tthis.validatePosition(this.position)\n\n\t\tthis.createContentWrapper()\n\t\tthis.registerListeners()\n\t}\n\n\tdisconnectedCallback() {\n\t\tthis.removeContent()\n\t}\n\n\tprivate createContentWrapper() {\n\t\tconst hasContentInside = this.host.querySelector(TooltipContentClass.root) as HTMLGovTooltipContentElement\n\t\tif (hasContentInside) {\n\t\t\tthis.content = hasContentInside\n\t\t} else {\n\t\t\tthis.content = document.createElement(TooltipContentClass.root) as HTMLGovTooltipContentElement\n\t\t\tthis.content.innerHTML = this.message\n\t\t\tthis.host.appendChild(this.content)\n\t\t}\n\n\t\tthis.content.setAttribute(\"id\", this.identifier ?? this.tooltipContentId)\n\t\tthis.content.setAttribute(\"parent-id\", this.tooltipId)\n\t\tthis.content.setAttribute(\"variant\", this.variant)\n\t\tthis.content.setAttribute(\"size\", this.size)\n\t\tdocument.body.appendChild(this.content)\n\t}\n\n\tprivate registerListeners() {\n\t\tthis.host.addEventListener(\"click\", e => {\n\t\t\te.preventDefault()\n\t\t\tthis.persist = true\n\t\t\tif (this.content) {\n\t\t\t\tthis.content.setAttribute(\"persist\", \"true\")\n\t\t\t}\n\t\t\tthis.showTooltip()\n\t\t})\n\t\tthis.host.addEventListener(\"focus\", e => {\n\t\t\te.preventDefault()\n\t\t\tthis.showTooltip()\n\t\t})\n\t\tthis.host.addEventListener(\"blur\", e => {\n\t\t\te.preventDefault()\n\t\t\tif (this.persist === false) {\n\t\t\t\tthis.hideTooltip()\n\t\t\t}\n\t\t})\n\t\tthis.host.addEventListener(\"mouseenter\", e => {\n\t\t\te.preventDefault()\n\t\t\tthis.showTooltip()\n\t\t})\n\t\tthis.host.addEventListener(\"mouseleave\", e => {\n\t\t\te.preventDefault()\n\t\t\tif (this.persist === false) {\n\t\t\t\tthis.hideTooltip()\n\t\t\t}\n\t\t})\n\t}\n\n\tprivate verifyPositionSpace() {\n\t\tconst offset = 12\n\t\tconst windowWidth = window.innerWidth - (window.innerWidth - document.documentElement.clientWidth);\n\t\tconst trigger = this.host.getBoundingClientRect()\n\t\tconst trgWidth = this.host.offsetWidth\n\t\tconst trgHeight = this.host.offsetHeight\n\t\tconst contentWidth = this.content.offsetWidth\n\t\tconst contentHeight = this.content.offsetHeight\n\t\tconst triggerPos = {\n\t\t\tleft: trigger.left + document.documentElement.scrollLeft,\n\t\t\ttop: trigger.top + document.documentElement.scrollTop,\n\t\t}\n\n\t\tconst isRightSpace = ((triggerPos.left + offset + trigger.width) + contentWidth) <= windowWidth;\n\t\tconst isLeftSpace = triggerPos.left > contentWidth;\n\n\t\t// LEFT/RIGHT\n\t\tif (this.position === TooltipPosition.LEFT || this.position === TooltipPosition.RIGHT) {\n\t\t\tthis.content.style.top = (triggerPos.top - ((contentHeight - trgHeight) / 2)) + \"px\";\n\t\t\tif (isRightSpace === false && isLeftSpace === false) {\n\t\t\t\tthis.position = TooltipPosition.TOP\n\t\t\t\tthis.content.setAttribute(\"position\", TooltipPosition.TOP)\n\t\t\t}\n\t\t\tif (isLeftSpace && isRightSpace === false && this.position === TooltipPosition.RIGHT) {\n\t\t\t\tthis.position = TooltipPosition.LEFT\n\t\t\t}\n\t\t\tif (isRightSpace && isLeftSpace === false && this.position === TooltipPosition.LEFT) {\n\t\t\t\tthis.position = TooltipPosition.RIGHT\n\t\t\t}\n\t\t}\n\t\tif (this.position === TooltipPosition.RIGHT) {\n\t\t\tthis.content.setAttribute(\"position\", TooltipPosition.RIGHT)\n\t\t\tthis.content.style.left = (triggerPos.left + offset + trigger.width) + \"px\"\n\t\t}\n\t\tif (this.position === TooltipPosition.LEFT) {\n\t\t\tthis.content.setAttribute(\"position\", TooltipPosition.LEFT)\n\t\t\tthis.content.style.left = (triggerPos.left - (contentWidth + offset)) + \"px\"\n\t\t}\n\n\t\t// LEFT/RIGHT FOR TOP/BOTTOM\n\t\tif (this.position === TooltipPosition.TOP || this.position === TooltipPosition.BOTTOM) {\n\t\t\tif (contentWidth > trgWidth) {\n\t\t\t\tlet leftPosition = (triggerPos.left - ((contentWidth - trgWidth) / 2));\n\t\t\t\tconst isNotLeftSpace = leftPosition < 0;\n\t\t\t\tconst isNotRightSpace = (leftPosition + contentWidth) > windowWidth;\n\t\t\t\tif (isNotLeftSpace && isNotRightSpace) {\n\t\t\t\t\tthis.content.style.width = \"auto\";\n\t\t\t\t\tthis.content.style.left = offset + \"px\";\n\t\t\t\t\tthis.content.style.right = offset + \"px\";\n\t\t\t\t} else {\n\t\t\t\t\tif (isNotLeftSpace) {\n\t\t\t\t\t\tleftPosition = offset\n\t\t\t\t\t}\n\t\t\t\t\tif (isNotRightSpace) {\n\t\t\t\t\t\tleftPosition = leftPosition - ((windowWidth - (leftPosition + contentWidth + offset)) * -1)\n\t\t\t\t\t}\n\t\t\t\t\tthis.content.style.left = leftPosition + \"px\"\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst leftPosition = (triggerPos.left + ((trgWidth - contentWidth) / 2))\n\n\t\t\t\tthis.content.style.left = leftPosition + \"px\"\n\t\t\t}\n\t\t}\n\t\tif (this.position === TooltipPosition.TOP) {\n\t\t\tthis.content.setAttribute(\"position\", TooltipPosition.TOP)\n\t\t\tthis.content.style.top = (triggerPos.top - (contentHeight + offset)) + \"px\"\n\t\t}\n\t\tif (this.position === TooltipPosition.BOTTOM) {\n\t\t\tthis.content.setAttribute(\"position\", TooltipPosition.BOTTOM)\n\t\t\tthis.content.style.top = (triggerPos.top + (trgHeight + offset)) + \"px\"\n\t\t}\n\n\t\tthis.content.style.opacity = '1'\n\n\t}\n\n\tprivate showTooltip() {\n\t\tif (this.content) {\n\t\t\tthis.content.style.opacity = '0'\n\t\t\tthis.content.hidden = false\n\t\t\tthis.content.setAttribute(\"is-visible\", \"true\")\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis.verifyPositionSpace()\n\t\t\t})\n\t\t}\n\t}\n\n\tprivate hideTooltip() {\n\t\tif (this.content) {\n\t\t\tthis.content.setAttribute(\"is-visible\", \"false\")\n\t\t\tthis.content.setAttribute(\"persist\", \"false\")\n\t\t\tthis.content.removeAttribute('style')\n\t\t}\n\t}\n\n\tprivate removeContent() {\n\t\tconst contentEl = document.getElementById(this.tooltipContentId)\n\t\tif (contentEl) {\n\t\t\tcontentEl.remove()\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Host\n\t\t\t\tid={this.tooltipId}\n\t\t\t\tclass={this.h.classes(TooltipClass.root)}\n\t\t\t\tposition={this.position}>\n\t\t\t\t<span role={'button'}\n\t\t\t\t\t\t\ttabindex={0}\n\t\t\t\t\t\t\taria-describedby={this.identifier ?? this.tooltipContentId}><slot/></span>\n\t\t\t</Host>\n\t\t)\n\t}\n\n\t/**\n\t * Showing the modal\n\t */\n\t@Method()\n\tasync show(): Promise<void> {\n\t\tthis.showTooltip()\n\t}\n\n\t/**\n\t * Hiding the modal\n\t */\n\t@Method()\n\tasync hide(): Promise<void> {\n\t\tthis.persist = false\n\t\tthis.hideTooltip()\n\t}\n}\n"],"mappings":"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"}