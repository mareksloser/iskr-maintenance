{"version":3,"names":["ClickOutsideOptionsDefaults","triggerEvents","exclude","registerClickOutside","component","element","callback","opt","excludedNodes","getExcludedNodes","getTriggerEvents","forEach","triggerEvent","window","addEventListener","e","initClickOutside","event","target","contains","isExcluded","call","split","map","trim","Array","from","document","querySelectorAll","err","console","warn","excudedNodes","excludedNode","Position","DropdownClass","root","list","govDropdownCss","GovDropdown","proxyCustomElement","H","constructor","LEFT","this","h","govHost","host","listId","createID","controlId","componentWillLoad","trigger","setAttribute","toBoolAttr","preventDefault","stopPropagation","open","govChange","emit","originalEvent","querySelector","ButtonClass","getSlot","render","Host","class","classes","position","ref","el","id","hidden","name","getState","setOpen","state"],"sources":["../../../node_modules/stencil-click-outside/dist/esm/index.js","../../../packages/core/src/components/gov-button/dropdown/constants.ts","../../../packages/core/src/components/gov-button/dropdown/gov-dropdown.scss?tag=gov-dropdown","../../../packages/core/src/components/gov-button/dropdown/gov-dropdown.tsx"],"sourcesContent":["import { Build as BUILD, getElement } from '@stencil/core';\nconst ClickOutsideOptionsDefaults = {\n    triggerEvents: \"click\",\n    exclude: \"\"\n};\n/**\n * Call this function as soon as the click outside of annotated method's host is done.\n * @example\n```\n@ClickOutside()\ncallback() {\n  // this will run when click outside of element (host component) is done.\n}\n```\n */\nexport function ClickOutside(opt = ClickOutsideOptionsDefaults) {\n    return (proto, methodName) => {\n        // this is to resolve the 'compiler optimization issue':\n        // lifecycle events not being called when not explicitly declared in at least one of components from bundle\n        BUILD.connectedCallback = true;\n        BUILD.disconnectedCallback = true;\n        const { connectedCallback, disconnectedCallback } = proto;\n        proto.connectedCallback = function () {\n            const host = getElement(this);\n            const method = this[methodName];\n            registerClickOutside(this, host, method, opt);\n            return connectedCallback && connectedCallback.call(this);\n        };\n        proto.disconnectedCallback = function () {\n            const host = getElement(this);\n            const method = this[methodName];\n            removeClickOutside(this, host, method, opt);\n            return disconnectedCallback && disconnectedCallback.call(this);\n        };\n    };\n}\n/**\n * Register callback function for HTMLElement to be executed when user clicks outside of element.\n * @example\n```\n<span\n    ref={spanEl => registerClickOutside(this, spanEl, () => this.test())}>\n      Hello, World!\n</span>;\n```\n */\nexport function registerClickOutside(component, element, callback, opt = ClickOutsideOptionsDefaults) {\n    const excludedNodes = getExcludedNodes(opt);\n    getTriggerEvents(opt).forEach(triggerEvent => {\n        window.addEventListener(triggerEvent, (e) => {\n            initClickOutside(e, component, element, callback, excludedNodes);\n        }, false);\n    });\n}\n/**\n * Remove click outside callback function for HTMLElement.\n */\nexport function removeClickOutside(component, element, callback, opt = ClickOutsideOptionsDefaults) {\n    getTriggerEvents(opt).forEach(triggerEvent => {\n        window.removeEventListener(triggerEvent, (e) => {\n            initClickOutside(e, component, element, callback);\n        }, false);\n    });\n}\nfunction initClickOutside(event, component, element, callback, excludedNodes) {\n    const target = event.target;\n    if (!element.contains(target) && !isExcluded(target, excludedNodes)) {\n        callback.call(component);\n    }\n}\nfunction getTriggerEvents(opt) {\n    if (opt.triggerEvents) {\n        return opt.triggerEvents.split(\",\").map(e => e.trim());\n    }\n    return [\"click\"];\n}\nfunction getExcludedNodes(opt) {\n    if (opt.exclude) {\n        try {\n            return Array.from(document.querySelectorAll(opt.exclude));\n        }\n        catch (err) {\n            console.warn(`@ClickOutside: Exclude: '${opt.exclude}' will not be evaluated. Check your exclude selector syntax.`, err);\n        }\n    }\n    return;\n}\nfunction isExcluded(target, excudedNodes) {\n    if (target && excudedNodes) {\n        for (let excludedNode of excudedNodes) {\n            if (excludedNode.contains(target)) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n","import { ValueOf } from \"../../../types/interfaces\"\n\nexport enum Position {\n\tLEFT = 'left',\n\tRIGHT = 'right',\n}\n\nexport type PositionType = `${ValueOf<typeof Position>}`\n\nexport const DropdownClass = {\n\troot: 'gov-dropdown',\n\tlist: 'gov-dropdown__list'\n}\n","/*\n *   Dropdown\n */\n\n$class: \".gov-dropdown\";\n\n#{$class} {\n\tposition: relative;\n\n\t&__list {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tz-index: 100;\n\t}\n\tul {\n\t\tpadding: rem-calc(4);\n\t\tborder-radius: $border-radius;\n\t\tbackground-color: $dropdown-bg-color;\n\t\tbox-shadow: $dropdown-box-shadow;\n\t}\n\tli {\n\t\tmargin: 0;\n\t\twhite-space: nowrap;\n\t\t&::before {\n\t\t\tcontent: none;\n\t\t}\n\t\t> * {\n\t\t\twidth: 100%;\n\t\t}\n\t\t> * .element {\n\t\t\tjustify-content: space-between;\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\t&[position=\"right\"] {\n\t\t#{$class}__list {\n\t\t\tright: 0;\n\t\t\tleft: initial;\n\t\t}\n\t}\n}\n","import { Component, Element, Event, EventEmitter, h, Host, Method, Prop } from \"@stencil/core\"\nimport { registerClickOutside } from \"stencil-click-outside\"\nimport { govHost, toBoolAttr } from \"../../../helpers/Dom/template\"\nimport { GovHost } from \"../../../helpers/Dom/template.types\"\nimport { Nullable } from \"../../../types/interfaces\"\nimport { createID } from \"../../../utils/string.utils\"\nimport { ButtonClass } from \"../button/constants\"\nimport { DropdownClass, Position, PositionType } from \"./constants\"\nimport { DropdownEvent } from \"./gov-dropdown.types\"\n\n@Component({\n\ttag: \"gov-dropdown\",\n\tstyleUrl: \"gov-dropdown.scss\",\n})\nexport class GovDropdown {\n\tprivate h: GovHost\n\tprivate readonly listId: string\n\tprivate readonly controlId: string\n\n\tconstructor() {\n\t\tthis.h = govHost(this.host)\n\t\tthis.listId = createID(\"GovDropdownList\")\n\t\tthis.controlId = createID(\"GovDropdownControl\")\n\t}\n\n\t@Element() host: HTMLGovButtonElement\n\t/**\n\t * Dropdown open state\n\t */\n\t@Prop({ mutable: true }) open = false\n\t/**\n\t * Menu display position\n\t */\n\t@Prop() readonly position: PositionType = Position.LEFT\n\t/**\n\t * Emitted when the dropdown change state\n\t */\n\t@Event({ eventName: \"gov-change\" }) govChange: EventEmitter<DropdownEvent>\n\n\tcomponentWillLoad() {\n\t\tif (this.trigger) {\n\t\t\tthis.trigger.setAttribute(\"wcag-controls\", this.listId)\n\t\t\tthis.trigger.setAttribute(\"wcag-has-popup\", toBoolAttr(!!this.list))\n\t\t\tthis.trigger.setAttribute(\"identifier\", this.controlId)\n\n\t\t\tthis.trigger.addEventListener(\"gov-click\", (e) => {\n\t\t\t\te.preventDefault()\n\t\t\t\te.stopPropagation()\n\t\t\t\tthis.open = !this.open\n\n\t\t\t\tthis.govChange.emit({\n\t\t\t\t\tcomponent: DropdownClass.root,\n\t\t\t\t\toriginalEvent: e,\n\t\t\t\t\topen: this.open,\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n\n\tget trigger() {\n\t\treturn this.host.querySelector(`* > ${ButtonClass.root}`) as HTMLGovButtonElement\n\t}\n\n\tget list() {\n\t\treturn this.h.getSlot(\"list\") as Nullable<HTMLUListElement>\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Host class={this.h.classes([DropdownClass.root])} open={this.open} position={this.position}>\n\t\t\t\t<slot></slot>\n\t\t\t\t<div\n\t\t\t\t\tref={el => registerClickOutside(this, el, () => this.open = false)}\n\t\t\t\t\tclass={DropdownClass.list}\n\t\t\t\t\tid={this.listId}\n\t\t\t\t\taria-labelledby={this.controlId}\n\t\t\t\t\taria-hidden={toBoolAttr(!this.open)}\n\t\t\t\t\thidden={!this.open}>\n\t\t\t\t\t<slot name=\"list\"></slot>\n\t\t\t\t</div>\n\t\t\t</Host>\n\t\t)\n\t}\n\n\t/**\n\t * Returns the current state of the dropdown\n\t */\n\t@Method()\n\tasync getState() {\n\t\treturn this.open\n\t}\n\n\t/**\n\t * Sets the dropdown state\n\t */\n\t@Method()\n\tasync setOpen(state: boolean) {\n\t\tthis.open = state\n\t}\n}\n"],"mappings":"mLACA,MAAMA,EAA8B,CAChCC,cAAe,QACfC,QAAS,IA2CN,SAASC,EAAqBC,EAAWC,EAASC,EAAUC,EAAMP,GACrE,MAAMQ,EAAgBC,EAAiBF,GACvCG,EAAiBH,GAAKI,SAAQC,IAC1BC,OAAOC,iBAAiBF,GAAeG,IACnCC,EAAiBD,EAAGX,EAAWC,EAASC,EAAUE,EAAc,GACjE,MAAM,GAEjB,CAWA,SAASQ,EAAiBC,EAAOb,EAAWC,EAASC,EAAUE,GAC3D,MAAMU,EAASD,EAAMC,OACrB,IAAKb,EAAQc,SAASD,KAAYE,EAAWF,EAAQV,GAAgB,CACjEF,EAASe,KAAKjB,EACtB,CACA,CACA,SAASM,EAAiBH,GACtB,GAAIA,EAAIN,cAAe,CACnB,OAAOM,EAAIN,cAAcqB,MAAM,KAAKC,KAAIR,GAAKA,EAAES,QACvD,CACI,MAAO,CAAC,QACZ,CACA,SAASf,EAAiBF,GACtB,GAAIA,EAAIL,QAAS,CACb,IACI,OAAOuB,MAAMC,KAAKC,SAASC,iBAAiBrB,EAAIL,SAC5D,CACQ,MAAO2B,GACHC,QAAQC,KAAK,4BAA4BxB,EAAIL,sEAAuE2B,EAChI,CACA,CACI,MACJ,CACA,SAAST,EAAWF,EAAQc,GACxB,GAAId,GAAUc,EAAc,CACxB,IAAK,IAAIC,KAAgBD,EAAc,CACnC,GAAIC,EAAad,SAASD,GAAS,CAC/B,OAAO,IACvB,CACA,CACA,CACI,OAAO,KACX,CC9FA,IAAYgB,GAAZ,SAAYA,GACXA,EAAA,eACAA,EAAA,gBACA,EAHD,CAAYA,MAAQ,KAOb,MAAMC,EAAgB,CAC5BC,KAAM,eACNC,KAAM,sBCXP,MAAMC,EAAiB,g6B,MCcVC,EAAWC,EAAA,MAAAD,UAAAE,EAKvB,WAAAC,G,8EAUgC,M,cAIUR,EAASS,KAblDC,KAAKC,EAAIC,EAAQF,KAAKG,MACtBH,KAAKI,OAASC,EAAS,mBACvBL,KAAKM,UAAYD,EAAS,qB,CAiB3B,iBAAAE,GACC,GAAIP,KAAKQ,QAAS,CACjBR,KAAKQ,QAAQC,aAAa,gBAAiBT,KAAKI,QAChDJ,KAAKQ,QAAQC,aAAa,iBAAkBC,IAAaV,KAAKP,OAC9DO,KAAKQ,QAAQC,aAAa,aAAcT,KAAKM,WAE7CN,KAAKQ,QAAQtC,iBAAiB,aAAcC,IAC3CA,EAAEwC,iBACFxC,EAAEyC,kBACFZ,KAAKa,MAAQb,KAAKa,KAElBb,KAAKc,UAAUC,KAAK,CACnBvD,UAAW+B,EAAcC,KACzBwB,cAAe7C,EACf0C,KAAMb,KAAKa,MACV,G,EAKL,WAAIL,GACH,OAAOR,KAAKG,KAAKc,cAAc,OAAOC,EAAY1B,O,CAGnD,QAAIC,GACH,OAAOO,KAAKC,EAAEkB,QAAQ,O,CAGvB,MAAAC,GACC,OACCnB,EAACoB,EAAI,CAACC,MAAOtB,KAAKC,EAAEsB,QAAQ,CAAChC,EAAcC,OAAQqB,KAAMb,KAAKa,KAAMW,SAAUxB,KAAKwB,UAClFvB,EAAA,aACAA,EAAA,OACCwB,IAAKC,GAAMnE,EAAqByC,KAAM0B,GAAI,IAAM1B,KAAKa,KAAO,QAC5DS,MAAO/B,EAAcE,KACrBkC,GAAI3B,KAAKI,OAAM,kBACEJ,KAAKM,UAAS,cAClBI,GAAYV,KAAKa,MAC9Be,QAAS5B,KAAKa,MACdZ,EAAA,QAAM4B,KAAK,U,CAUf,cAAMC,GACL,OAAO9B,KAAKa,I,CAOb,aAAMkB,CAAQC,GACbhC,KAAKa,KAAOmB,C"}